---
title: "步骤三：获取日历信息"
source_url: https://open.feishu.cn/document/calendar-event-sync/calendar-sync
last_remote_update: 2023-07-25
last_remote_update_timestamp: 1690266024000
---
最后更新于 2023-07-25

# 步骤三：获取日历信息

在本步骤中，你将使用[步骤二](https://open.feishu.cn/document/home/calendar-event-sync/subscribe-to-events)中获取到的 user_access_token 和 calendar_id，获取日历信息。

## 获取存量日历信息

1. 调用[查询日历列表](https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/reference/calendar-v4/calendar/list)接口。

打开 [API调试台](https://open.feishu.cn/api-explorer)，在左侧 API 列表中，选择 **日历** > **日历管理** > **查询日历列表**。

2. 在 **查询参数** 页签，填写参数信息。

- 首次调用时，**page_token** 和 **sync_token** 传空即可。

![](https://sf3-cn.feishucdn.com/obj/open-platform-opendoc/aec95001b144c87c130104417e753b89_CopEMhwLWo.png?height=1456&lazyload=true&maxWidth=600&width=2876)

- 如果列表数据较多，一页没有完全展示，则可以再次调用该接口，传入上一次调用时，在响应数据中获取到的 **page_token** 和 **sync_token。**

![](https://sf3-cn.feishucdn.com/obj/open-platform-opendoc/26d292d98c795adb37166e140326cae8_1W7BoACm4r.png?height=1434&lazyload=true&maxWidth=600&width=2876)

3. 其他配置项保持默认值，然后在页面右上角点击 **开始调试**。

调用成功的回显信息如下图所示，你可以多次调用该接口以查看完整的日历列表数据，直至 **has_more** 为 **false**，**sync_token** 返回值不为空时，表示完成了存量日历列表的获取。
在最后一次调用时，你需要保存返回的 **sync_token** 值，后续用于获取增量数据。

![](https://sf3-cn.feishucdn.com/obj/open-platform-opendoc/872c807517246f991513768f2d5db270_ko2pIQeiIX.png?height=1446&lazyload=true&maxWidth=600&width=2882)

## 获取增量日历信息

1. 通过飞书客户端，或者[创建共享日历](https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/reference/calendar-v4/calendar/create)接口，在当前登录用户（即 **user_access_token** 对应的用户）下新建一个日历。

- 方式一：飞书客户端新建日历

在客户端的 **日历** 功能页面，新建日历。

![](https://sf3-cn.feishucdn.com/obj/open-platform-opendoc/f73f5a30727364e9325baa12c520f22b_3yCc16gQu4.png?height=1588&lazyload=true&maxWidth=600&width=2858)

- 方式二：调用 API 接口新建日历方式说明

打开 [API调试台](https://open.feishu.cn/api-explorer)，在左侧 API 列表中，选择 **日历** > **日历管理** > **创建共享日历**，保持 **请求头**、**请求体** 的默认配置，点击 **开始调试** 完成新建日历的操作。

![](https://sf3-cn.feishucdn.com/obj/open-platform-opendoc/0c69d29b45ac24797b0ba846ed3a86dc_rNyyPznXr7.png?height=1414&lazyload=true&maxWidth=600&width=2878)

2. 由于测试应用已配置了日历日程的事件订阅，因此测试应用的回调地址会收到日历变更的事件回调通知。

![](https://sf3-cn.feishucdn.com/obj/open-platform-opendoc/a92e12f17143e293825cc9e97a27cf23_Zc3FqPFTuA.png?height=1256&lazyload=true&maxWidth=600&width=2648)

3. 调用[查询日历列表](https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/reference/calendar-v4/calendar/list)接口，获取增量日历数据。

1. 打开 [API调试台](https://open.feishu.cn/api-explorer)，在左侧 API 列表中，选择 **日历** > **日历管理** > **查询日历列表**。

2. 在 **查询参数** 页签内，填写上一次获取存量日程时返回的 **sync_token** 参数值。

![](https://sf3-cn.feishucdn.com/obj/open-platform-opendoc/ba6455b9d4c114b7f99d72480b543eb6_r1wNNEFZyD.png?height=1424&lazyload=true&maxWidth=600&width=2876)

3. 在页面右上角，点击 **开始调试**。

调用成功的回显信息如下图所示，将会获取增量日历数据。

![](https://sf3-cn.feishucdn.com/obj/open-platform-opendoc/151e0a1ded0f2077c583dfc13676a071_aUpiEQqTjK.png?height=1414&lazyload=true&maxWidth=600&width=2872)

后续再收到日历变更通知，可重复该增量数据的获取操作，以获取完整的日历信息。
