---
title: "简介"
source_url: https://open.feishu.cn/document/event-based-messaging/introduction
last_remote_update: 2024-07-12
last_remote_update_timestamp: 1720776160000
---
最后更新于 2024-07-12

# 简介

飞书的事件订阅能力可以帮助你及时感知系统中的数据变化，并快速响应事件。本教程以新员工入群场景为例，介绍如何在新员工入群时发送欢迎消息。关于事件订阅的更多信息，参见[事件订阅概述](https://open.feishu.cn/document/ukTMukTMukTM/uUTNz4SN1MjL1UzM)。

## 实现效果

当新人加入群聊后，群会自动推送如下图所示的欢迎消息。

![](https://sf3-cn.feishucdn.com/obj/open-platform-opendoc/a6d369cffc485c52f4301c302e45120f_FpQjmHkG82.png?height=1000&lazyload=true&maxWidth=700&width=1640)

## 实现原理

基于事件的消息发送实现原理如下图所示。创建一个企业自建应用并配置事件订阅服务，在有用户入群时，应用发送订阅的事件至本地服务端请求地址，服务端接收数据后，获取用户、群相关的信息，然后通过消息服务向目标群发送欢迎消息。

![](https://sf3-cn.feishucdn.com/obj/open-platform-opendoc/fc4bcf68d133d9c7165b317270b4915c_jKcfJYJmaS.png?height=843&lazyload=true&maxWidth=700&width=1640)

## 使用到的 API 与事件

### OpenAPI

**[方法 (API)](https://open.feishu.cn/document/ukTMukTMukTM/uITNz4iM1MjLyUzM)** | 权限要求（满足任一） | **[访问凭证](https://open.feishu.cn/document/ukTMukTMukTM/uMTNz4yM1MjLzUzM)**
--- | --- | ---
[发送消息](https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/reference/im-v1/message/create)  
`POST` https://open.feishu.cn/open-apis/im/v1/messages | 以应用的身份发消息(im:message:send_as_bot)  
获取与发送单聊、群组消息(im:message)  
发送消息V2(im:message:send) | `tenant_access_token`

### 事件

**[事件](https://open.feishu.cn/document/ukTMukTMukTM/uUTNz4SN1MjL1UzM)** | 权限要求**订阅该事件所需的权限，开启其中任意一项权限即可订阅**
--- | ---
[用户进群](https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/reference/im-v1/chat-member-user/events/added)  
`im.chat.member.user.added_v1` | 查看群成员(im:chat.members:read)  
获取与更新群组信息(im:chat)  
获取群组信息(im:chat:readonly)
