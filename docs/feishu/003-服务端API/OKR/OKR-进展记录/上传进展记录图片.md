---
title: "上传进展记录图片"
source_url: https://open.feishu.cn/document/server-docs/okr-v1/progress_record/upload
last_remote_update: 2025-07-25
last_remote_update_timestamp: 1753428958000
---
最后更新于 2025-07-25

# 上传进展记录图片

上传图片，以获取在进展记录富文本中使用的 token。成功调用该接口后，你可继续调用[创建 OKR 进展记录](https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/reference/okr-v1/progress_record/create)或[更新 OKR 进展记录](https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/reference/okr-v1/progress_record/update)，将返回的 `url`参数和`file_token` 参数传入 `imageList` 参数中。

## 请求
名称 | 值
---|---
HTTP URL | https://open.feishu.cn/open-apis/okr/v1/images/upload
HTTP Method | POST
接口频率限制 | [100 次/分钟](https://open.feishu.cn/document/ukTMukTMukTM/uUzN04SN3QjL1cDN)
支持的应用类型 | 自建应用
权限要求  
            **调用该 API 所需的权限。开启其中任意一项权限即可调用**  
            开启任一权限即可 | 更新 OKR 信息(okr:okr)  
            上传 OKR 进展图片附件(okr:okr.progress.file:upload)

### 请求头

名称 | 类型 | 必填 | 描述
--- | --- | --- | ---
Authorization | string | 是 | `tenant_access_token`  
或  
`user_access_token`  
**值格式**："Bearer `access_token`"  
**示例值**："Bearer u-7f1bcd13fc57d46bac21793a18e560"  
[了解更多：如何选择与获取 access token](https://open.feishu.cn/document/uAjLw4CM/ugTN1YjL4UTN24CO1UjN/trouble-shooting/how-to-choose-which-type-of-token-to-use)
Content-Type | string | 是 | **示例值**："multipart/form-data; boundary=---7MA4YWxkTrZu0gW"

### 请求体

名称 | 类型 | 必填 | 描述
--- | --- | --- | ---
data | file | 是 | 图片二进制文件。目前仅支持上传 JPG、JPEG、PNG、WEBP、GIF、BMP、ICO、TIFF、HEIC 格式的图片。  
**示例值**：file binary
target_id | string | 是 | 插入图片所在的待创建/修改的进展记录对应的目标 ID，可以通过调用“批量获取 OKR”或“获取用户的 OKR 列表”接口获取对应的 Objective 或 KR 的 ID。  
**示例值**："6974586812998174252"
target_type | int | 是 | 插入图片所在的待创建/修改的进展记录对应的目标类型  
**示例值**：2  
**可选值有**：  
- 2：okr的O  
- 3：okr的KR

### 请求体示例

```HTTP
---7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="data";
Content-Type: application/octet-stream

---7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="target_id";

6974586812998174252
---7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="target_type";

2
---7MA4YWxkTrZu0gW
```

## 响应

### 响应体

名称 | 类型 | 描述
--- | --- | ---
code | int | 错误码，非 0 表示失败
msg | string | 错误描述
data | image_info | \-
file_token | string | 图片token
url | string | 图片下载链接

### 响应体示例
```json
{
    "code": 0,
    "data": {
        "file_token": "boxbcc6DmPfgi4rNXIaGfptc9HX",
        "url": "https://internal-****.cn/stream/api/downloadFile/?file_token=boxbcc6DmPfgi4rNXIaGfptc9HX&ticket=eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJ0YXJnZXRfaWQiOiI3MDQxNTA5NTg4MzkwMzQ2NzcyIiwidGFyZ2V0X3R5cGUiOjEsImFjdGlvbiI6MiwiZmlsZV90b2tlbiI6ImJveGJjYzZEbVBmZ2k0ck5YSWFHZnB0YzlIWCIsInVzZXJfaWQiOiI2OTY5ODU1NTAxNzQ0ODM0MDkyIiwidGVuYW50X2lkIjoiNjg3NzUwMjY4NzYwOTQwNjk5MCIsImV4cCI6MTY0MDY4MzI4OX0.VqOLS7kDtCuhyU_WuWeXvxg1XIyJxskBfNGFQP8uGkCBhYh9scwcbWQJ4xubAZs3cmsrPMVm-aho3tz5d7NT5Q"
    },
    "msg": "success"
}
```

### 错误码

HTTP状态码 | 错误码 | 描述 | 排查建议
--- | --- | --- | ---
500 | 1009999 | internal server error | 内部错误，请联系飞书助手或您的客户成功经理
500 | 1009998 | system exception | 系统异常，请联系飞书助手或您的客户成功经理
400 | 1001001 | invalid parameters | 无效的参数，请对照文档检查输入的参数
400 | 1001002 | no permission | 您无权访问该接口，请确认您的登录凭证
400 | 1001003 | user not found | 用户不存在
400 | 1001004 | okr data not found | 对应ID的数据不存在
