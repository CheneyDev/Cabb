---
title: "获取关联组织的部门和成员信息"
source_url: https://open.feishu.cn/document/trust_party-v1/-collaboraiton-organization/visible_organization
last_remote_update: 2025-04-29
last_remote_update_timestamp: 1745918469000
---
最后更新于 2025-04-29

# 获取关联组织的成员信息

该接口会返回用户在外部部门下可见的下级部门、用户、用户组。

## 提示

使用 user_access_token 时，按照 admin 管理后台关联组织列表中针对用户设置的可见性规则进行校验；使用 tenant_access_token 时，按照应用互通界面中针对应用设置的可见性规则进行校验。

## 请求
名称 | 值
---|---
HTTP URL | https://open.feishu.cn/open-apis/trust_party/v1/collaboration_tenants/:target_tenant_key/visible_organization
HTTP Method | GET
接口频率限制 | [1000 次/分钟、50 次/秒](https://open.feishu.cn/document/ukTMukTMukTM/uUzN04SN3QjL1cDN)
支持的应用类型 | 自建应用、商店应用
权限要求  
            **调用该 API 所需的权限。开启其中任意一项权限即可调用** | 以应用身份读取关联组织(trust_party:collaboration.tenant:readonly)

### 请求头

名称 | 类型 | 必填 | 描述
--- | --- | --- | ---
Authorization | string | 是 | `tenant_access_token`  
或  
`user_access_token`  
**值格式**："Bearer `access_token`"  
**示例值**："Bearer u-7f1bcd13fc57d46bac21793a18e560"  
[了解更多：如何选择与获取 access token](https://open.feishu.cn/document/uAjLw4CM/ugTN1YjL4UTN24CO1UjN/trouble-shooting/how-to-choose-which-type-of-token-to-use)

### 路径参数

名称 | 类型 | 描述
--- | --- | ---
target_tenant_key | string | 对方关联组织的 tenant key。可通过[管理员获取所有关联组织列表](https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/directory-v1/collaboration_tenant/list)获取  
**示例值**："4e6ac4d14bcd5071a37a39de902c7141"

### 查询参数

名称 | 类型 | 必填 | 描述
--- | --- | --- | ---
department_id_type | string | 否 | 此次调用中使用的部门ID的类型  
**示例值**：department_id  
**可选值有**：  
- department_id：以自定义department_id来标识部门  
- open_department_id：以open_department_id来标识部门  
**默认值**：`department_id`
target_department_id | string | 否 | 请求关联组织的部门ID，0代表根部门，与target_group_id二选一；可以从[获取关联组织的部门和成员信息](https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/reference/contact-v3/collaboration_tenant/visible_organization)中获得  
**示例值**：od-4e6ac4d14bcd5071a37a39de902c7141
page_token | string | 否 | 分页标记，第一次请求不填，表示从头开始遍历；分页查询结果还有更多项时会同时返回新的 page_token，下次遍历可采用该 page_token 获取查询结果  
**示例值**：AQD9/Rn9eij9Pm39ED40/TIx6jupqdAcfLY%2B51xMvNU=
page_size | int | 否 | 请求的可见实体数量  
**示例值**：10  
**默认值**：`100`  
**数据校验规则**：  
- 取值范围：`1` ～ `200`
group_id_type | string | 否 | 此次调用中使用的用户组ID的类型  
**示例值**：group_id  
**可选值有**：  
- group_id：group_id  
- open_group_id：以open_group_id来标识用户组  
**默认值**：`group_id`
target_group_id | string | 否 | 请求关联组织的用户组ID，与target_department_id二选一；可以从[获取关联组织的部门和成员信息](https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/reference/contact-v3/collaboration_tenant/visible_organization)中获得  
**示例值**：od-4e6ac4d14bcd5071a37a39de902c7141

## 响应

### 响应体

名称 | 类型 | 描述
--- | --- | ---
code | int | 错误码，非 0 表示失败
msg | string | 错误描述
data | \- | \-
collaboration_entity_list | collaboration_entity\[\] | 该部门下可见的部门、用户、用户组列表
collaboration_entity_type | string | 关联组织实体类型  
**可选值有**：  
- user：用户类型  
- department：部门类型  
- group：用户组类型
department_id | string | 部门ID
open_department_id | string | 部门的open ID
user_id | string | 用户ID
open_user_id | string | 用户的open ID
union_user_id | string | 用户的union_id
department_name | string | 部门名称
i18n_department_name | i18n_name | 部门的国际化名称
zh_cn | string | 中文名
ja_jp | string | 日文名
en_us | string | 英文名
department_order | string | 部门顺序
user_name | string | 对方成员名称
i18n_user_name | i18n_name | 对方成员i18n名称
zh_cn | string | 中文名
ja_jp | string | 日文名
en_us | string | 英文名
user_avatar | avatar_info | 对方租户的成员头像
avatar_72 | string | 72*72像素头像链接
avatar_240 | string | 240*240像素头像链接
avatar_640 | string | 640*640像素头像链接
avatar_origin | string | 原始头像链接
group_id | string | 用户组ID
open_group_id | string | 用户组的open ID
group_name | string | 对方用户组名称
i18n_group_name | i18n_name | 对方用户组i18n名称
zh_cn | string | 中文名
ja_jp | string | 日文名
en_us | string | 英文名
has_more | boolean | 是否还有更多项
page_token | string | 分页标记，当 has_more 为 true 时，会同时返回新的 page_token，否则不返回 page_token

### 响应体示例
```json
{
    "code": 0,
    "msg": "success",
    "data": {
        "collaboration_entity_list": [
            {
                "collaboration_entity_type": "user",
                "department_id": "D096",
                "open_department_id": "od-4e6ac4d14bcd5071a37a39de902c7141",
                "user_id": "a0121196",
                "open_user_id": "ou_4e6ac4d14bcd5071a37a39de902c7141",
                "union_user_id": "on_4e6ac4d14bcd5071a37a39de902c7141",
                "department_name": "test",
                "i18n_department_name": {
                    "zh_cn": "zh_cn_name",
                    "ja_jp": "ja_jp_name",
                    "en_us": "en_name"
                },
                "department_order": "2000",
                "user_name": "test_user_name",
                "i18n_user_name": {
                    "zh_cn": "zh_cn_name",
                    "ja_jp": "ja_jp_name",
                    "en_us": "en_name"
                },
                "user_avatar": {
                    "avatar_72": "https://foo.icon.com/xxxx",
                    "avatar_240": "https://foo.icon.com/xxxx",
                    "avatar_640": "https://foo.icon.com/xxxx",
                    "avatar_origin": "https://foo.icon.com/xxxx"
                },
                "group_id": "a0121196",
                "open_group_id": "ou_4e6ac4d14bcd5071a37a39de902c7141",
                "group_name": "test_user_name",
                "i18n_group_name": {
                    "zh_cn": "zh_cn_name",
                    "ja_jp": "ja_jp_name",
                    "en_us": "en_name"
                }
            }
        ],
        "has_more": true,
        "page_token": "AQD9/Rn9eij9Pm39ED40/TIx6jupqdAcfLY%2B51xMvNU="
    }
}
```

### 错误码

HTTP状态码 | 错误码 | 描述 | 排查建议
--- | --- | --- | ---
400 | 1971001 | user not visible to target tenant | 选择可见的关联组织
400 | 1971002 | User not visible to target department. | 选择关联组织下可见的部门
400 | 1970012 | Page token is invalid error | 填写正确的page token
400 | 1970011 | Page size is invalid error. | 填写正确的Page size
400 | 1971007 | App not visible to target tenant. | 请设置应用对关联组织的权限
400 | 1971008 | App not visible to target department. | 请设置应用对部门的权限
