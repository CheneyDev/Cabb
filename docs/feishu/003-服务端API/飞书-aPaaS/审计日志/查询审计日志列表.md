---
title: "查询审计日志列表"
source_url: https://open.feishu.cn/document/apaas-v1/application-audit_log/audit_log_list
last_remote_update: 2024-09-24
last_remote_update_timestamp: 1727166303000
---
最后更新于 2024-09-24

# 查询审计日志列表

根据搜索/筛选条件，查询审计日志列表
**注意事项**：每次最多可查询 10,000 条数据

## 请求
名称 | 值
---|---
HTTP URL | https://open.feishu.cn/open-apis/apaas/v1/applications/:namespace/audit_log/audit_log_list
HTTP Method | GET
接口频率限制 | [10 次/秒](https://open.feishu.cn/document/ukTMukTMukTM/uUzN04SN3QjL1cDN)
支持的应用类型 | 自建应用、商店应用
权限要求  
            **调用该 API 所需的权限。开启其中任意一项权限即可调用** | 获取飞书低代码平台审计日志信息(app_engine:security.audit_log:read)

### 请求头

名称 | 类型 | 必填 | 描述
--- | --- | --- | ---
Authorization | string | 是 | `user_access_token`  
**值格式**："Bearer `access_token`"  
**示例值**："Bearer u-7f1bcd13fc57d46bac21793a18e560"  
[了解更多：如何选择与获取 access token](https://open.feishu.cn/document/uAjLw4CM/ugTN1YjL4UTN24CO1UjN/trouble-shooting/how-to-choose-which-type-of-token-to-use)

### 路径参数

名称 | 类型 | 描述
--- | --- | ---
namespace | string | 应用命名空间  
**示例值**："package_aa_bb"  
**数据校验规则**：  
- 长度范围：`0` ～ `30` 字符

### 查询参数

名称 | 类型 | 必填 | 描述
--- | --- | --- | ---
page_size | string | 是 | 分页大小  
**示例值**：10
offset | string | 是 | 翻页数量  
**示例值**：0  
**数据校验规则**：  
- 长度范围：`0` ～ `100` 字符
quick_query | string | 否 | 模糊查询  
**示例值**：Intel Mac OS  
**数据校验规则**：  
- 长度范围：`0` ～ `1000` 字符
from | string | 是 | 查询时间范围：开始时间（单位为毫秒级时间戳）  
**示例值**：1723691857002  
**数据校验规则**：  
- 长度范围：`0` ～ `1000` 字符
to | string | 是 | 查询时间范围：结束时间（单位为毫秒级时间戳）  
**示例值**：1724296657002  
**数据校验规则**：  
- 长度范围：`0` ～ `1000` 字符
log_type | string | 是 | 日志类型：  
- 10000: 全部日志  
- 10001: 企业管理日志  
- 10002: 登录日志  
- 10003: 应用管理日志  
**示例值**：10000  
**数据校验规则**：  
- 长度范围：`0` ～ `1000` 字符
filter | string | 否 | 日志查询：筛选能力  
**示例值**：{"items":[{"left":"eventName","operator":"=","right":[19001]}]}  
**数据校验规则**：  
- 长度范围：`0` ～ `1000` 字符
columns | string\[\] | 否 | 日志列表：选择展示行信息，例如["opTime","appName","eventName","clientIP","operator","status"]  
**示例值**：operator  
**数据校验规则**：  
- 长度范围：`0` ～ `1000`
sort_by | string | 否 | 查询排序字段：可选项为操作时间（opTime）  
**示例值**：opTime  
**数据校验规则**：  
- 长度范围：`0` ～ `1000` 字符
sort_order | string | 否 | 查询排序：默认按时间从大到小；从小到大使用 asc  
**示例值**：asc  
**数据校验规则**：  
- 长度范围：`0` ～ `1000` 字符
app_type | string | 否 | 应用类型，0为apaas类型，1为aily类型  
**示例值**：0  
**数据校验规则**：  
- 长度范围：`0` ～ `1000` 字符

## 响应

### 响应体

名称 | 类型 | 描述
--- | --- | ---
code | int | 错误码，非 0 表示失败
msg | string | 错误描述
data | \- | \-
items | audit_log_es_field\[\] | 审计日志查询结果列表详情信息
log_id | string | 审计日志ID
op_time | string | 操作时间
log_type | string | 日志类型：  
- 10000: 全部日志  
- 10001: 企业管理日志  
- 10002: 登录日志  
- 10003: 应用管理日志
operator | lookup_with_avatar | 操作人
id | string | 用户ID
name | string | 用户名称
tenant_id | string | 租户ID
email | string | 用户邮箱
outsider | boolean | 是否为外部用户,true代表是外部用户
login_type | string | 登录类型:  
-11001: 飞书登录  
-11003: 账号密码登录
lark_tenant_id | string | 飞书租户ID
apaas_tenant_id | string | apaas租户ID
user_geo | string | 用户地理信息
client_ip | string | 客户端IP
ip_loc | string | IP位置
ip_provider | string | IP提供商
referer | string | 引用页面
origin | string | 源页面
api_path | string | 路由路径
full_path | string | 网关路径
user_agent | string | 用户代理
device_id | string | 设备ID
web_device_id | string | web端设备ID
terminal_type | string | 终端类型:  
- 13002: PC类型  
- 13003: Web类型
os_type | string | 系统类型:  
- 14002: window  
- 14001: 未知
os_version | string | 系统版本
module | string | 功能模块
data_object | string | 数据对象
audit_scope | string | 审计域:  
- 15001: 企业管理后台  
- 15002: 应用管理后台  
- 15003: 应用开发平台
tenant_id | string | 租户ID
namespace | string | 应用唯一标识
env_type | string | 环境类型:  
- 16001：沙箱环境  
- 16003：线上环境
op_type | string | 事件类型
op_detail | map&lt;string, string&gt; | 操作详情内容
op_source | string | 操作源:  
- 20001：前端  
- 20004：openapi
status | string | 操作状态:  
- 18001：成功  
- 18002：失败
failed_reason_i18n | map&lt;string, string&gt; | 失败原因
data_changes | string\[\] | 数据变化(旧值和新值)
app_name | map&lt;string, string&gt; | 应用名称
keyword_field_app_version | string | 应用版本号
keyword_field_functional_sub_module | string | 审计日志事件子模块
total | string | 审计日志查询总条数

### 响应体示例
```json
{
    "code": 0,
    "msg": "success",
    "data": {
        "items": [
            {
                "log_id": "7376574450886557740",
                "op_time": "1723634726874",
                "log_type": "10000",
                "operator": {
                    "id": "1768491480010814",
                    "name": "郭xx",
                    "tenant_id": "79888",
                    "email": "gxxx@bytedance.com"
                },
                "outsider": true,
                "login_type": "11001",
                "lark_tenant_id": "123",
                "apaas_tenant_id": "23333",
                "user_geo": "America/Chicago",
                "client_ip": "192.168.1.1",
                "ip_loc": "中国北京",
                "ip_provider": "ISP_com",
                "referer": "https://example.com/referer",
                "origin": "https://example.com/origin",
                "api_path": "/api/xxx",
                "full_path": "/api/xxx",
                "user_agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 14_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148",
                "device_id": "device_1234",
                "web_device_id": "webDevice_1234",
                "terminal_type": "2",
                "os_type": "14002",
                "os_version": "14.6",
                "module": "17001",
                "data_object": "object_api_aaa",
                "audit_scope": "15001",
                "tenant_id": "23335",
                "namespace": "package_aacc",
                "env_type": "16003",
                "op_type": "19001",
                "op_detail": {
                    "2052": "管理员和开发者自动获取所有使用权限"
                },
                "op_source": "20001",
                "status": "18001",
                "failed_reason_i18n": {
                    "2052": "中文失败原因内容"
                },
                "data_changes": [
                    "{\"old\": \"OldData\",\"new\": \"NewData\"}"
                ],
                "app_name": {
                    "2052": "应用示例"
                },
                "keyword_field_app_version": "v1.2.3",
                "keyword_field_functional_sub_module": "223"
            }
        ],
        "total": "10"
    }
}
```

### 错误码

HTTP状态码 | 错误码 | 描述 | 排查建议
--- | --- | --- | ---
400 | 2320001 | param is invalid | 请检查入参信息
