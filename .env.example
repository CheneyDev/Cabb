PORT=8080
DATABASE_URL=postgres://postgres:postgres@localhost:5432/plane_integration?sslmode=disable
TIMEZONE=Local

# Plane (Webhook-only mode, OAuth removed)
# PLANE_SERVICE_TOKEN: Global Plane Service Token for all outbound API calls (optional)
#   - Leave empty to disable CNB/Feishu → Plane write-back features
#   - Obtain from Plane Workspace Settings → Service Token
PLANE_BASE_URL=https://api.plane.so
PLANE_WEBHOOK_SECRET=
PLANE_SERVICE_TOKEN=

# Feishu (Lark)
LARK_APP_ID=
LARK_APP_SECRET=
LARK_ENCRYPT_KEY=
LARK_VERIFICATION_TOKEN= # 可选：未配置 Encrypt Key 时作为兜底来源校验（Verification Token）

# CNB
# CNB_APP_TOKEN：用于本服务“出站”访问 CNB OpenAPI 的 Bearer Token。
# 获取：在 CNB 平台「个人设置 -> 访问令牌」创建并获取 Token，勾选最小必要权限（如 repo-contents）。
# 参考：docs/cnb-docs/plugins/cnbcool/attachments/README.md 中对 CNB_TOKEN 的说明。
CNB_APP_TOKEN=
# INTEGRATION_TOKEN：供 .cnb.yml 在回调本服务 /ingest/cnb/* 端点时使用的共享密钥。
# 用法：作为请求头 Authorization: Bearer <INTEGRATION_TOKEN> 被本服务校验。
# 获取：自行生成高强度随机字符串（示例：`openssl rand -hex 32` 或 Python secrets），
# 并在 CNB 的流水线/密钥库中配置同名环境变量以注入到 .cnb.yml。参考：docs/design/cnb-integration.md。
INTEGRATION_TOKEN=
CNB_BASE_URL=https://api.cnb.cool
# CNB_OUTBOUND_ENABLED=true  # 默认启用，无需设置

# Crypto
ENCRYPTION_KEY=change-me-32-bytes

# Admin console authentication
ADMIN_SESSION_COOKIE=pi_admin_session
ADMIN_SESSION_TTL_HOURS=12
ADMIN_SESSION_SECURE=false
# Optional: bootstrap an initial admin (only used when both email/password are provided)
# Change these after first login in production environments.
ADMIN_BOOTSTRAP_EMAIL=admin@example.com
ADMIN_BOOTSTRAP_PASSWORD=ChangeMe123!
ADMIN_BOOTSTRAP_NAME=Plane Admin

# Jobs / Cleanup (optional)
# Enable daily cleanup of stale thread links (sync_enabled=false) older than N days.
CLEANUP_THREAD_LINKS_ENABLED=true
CLEANUP_THREAD_LINKS_DAYS=90
# Run time of day in HH:MM (uses TIMEZONE), default 03:00
CLEANUP_THREAD_LINKS_AT=03:00
